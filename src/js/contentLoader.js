const converter=new showdown.Converter;converter.setFlavor("github");const PLACEHOLDER_IMG_HUMAN="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NjYyI+PHBhdGggZD0iTTEyIDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptMCAyYy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00LTJ6Ii8+PC9zdmc+";async function fetchData(e){try{const t=await fetch(`content/${e}.json`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.warn(`[ContentLoader] Failed to fetch ${e}:`,t),["globals","pages"].includes(e)?{}:[]}}async function loadTeamContent(){const e=(await fetchData("team")).members||[],t=e.filter((e=>e.is_pi)),n=e.filter((e=>!e.is_pi)).sort(((e,t)=>e.name.localeCompare(t.name))),a=document.getElementById("team-pis");var i;a&&(a.innerHTML=(i=!0,t.map((e=>`\n        <div class="profile-card">\n            ${e.image?`<div class="profile-img-container"><img src="${e.image}" alt="${e.name}" class="profile-img" loading="lazy"></div>`:""}\n            <div class="profile-info">\n                <h4 class="profile-name">${e.name}</h4>\n                \n                \n                ${i&&"Center Director"===e.role?`<div class="profile-role pi-director-label">${e.role}</div>`:""}\n                \n                ${i&&e.title_detail?`<p class="pi-title-detail">${e.title_detail.replace(/\n/g,"<br>")}</p>`:""}\n                \n                ${i?"":`\n                    <div class="profile-role" style="font-weight: 700; margin-bottom: 0;">${e.role}</div>\n                    ${e.advisor?`\n                        <div class="student-advisor">\n                            <span class="advisor-label">Advisor:</span> <span class="advisor-name">${e.advisor}</span>\n                        </div>`:""}\n                    <p style="font-size: 0.8rem; color: var(--uh-slate); margin-top: 5px; line-height: 1.3;">${e.department||""}<br>${e.university||""}</p>\n                `}\n\n                <p style="font-size: ${i?"0.9rem":"0.85rem"}; margin-top: 10px;">${e.bio||""}</p>\n                ${e.tags&&e.tags.length>0?`<div class="profile-tags">${e.tags.map((e=>`<span class="tag">${e}</span>`)).join("")}</div>`:""}\n                <div style="margin-top: 15px; display: flex; gap: 15px; align-items: center;">\n                    ${e.email?`<a href="mailto:${e.email}" title="Email"><i class="fas fa-envelope text-uh-red fa-lg"></i></a>`:""}\n                    ${e.website?`<a href="${e.website}" target="_blank" title="Lab Website"><i class="fas fa-globe text-uh-red fa-lg"></i></a>`:""}\n                    ${e.scholar?`<a href="${e.scholar}" target="_blank" title="Google Scholar"><i class="fas fa-graduation-cap text-uh-red fa-lg"></i></a>`:""}\n                </div>\n            </div>\n        </div>\n    `)).join("")));const s=document.getElementById("team-group");s&&(s.innerHTML=n.map((e=>`\n            <div class="student-card">\n                <div class="student-img-container">\n                    <img src="${e.image||"public/images/default-placeholder.jpg"}" class="student-img" alt="${e.name}" loading="lazy">\n                </div>\n                <div class="student-info">\n                    <div class="student-name">${e.name}</div>\n                    <div class="student-role">${e.role}</div>\n                    ${e.advisor?`\n                        <div class="student-advisor">\n                            <span class="advisor-label">Advisor:</span> <span class="advisor-name">${e.advisor}</span>\n                        </div>\n                    `:""}\n                    <div class="student-bio">${e.bio||""}</div>\n                </div>\n            </div>\n        `)).join(""))}let currentCalDate=new Date;async function loadEventsContent(){const e=(await fetchData("events")).events_list||[];window.eventsStore=e,renderCalendar(e);const t=document.getElementById("events-grid");if(t){const n=e.sort(((e,t)=>new Date(e.date)-new Date(t.date)));0===n.length?t.innerHTML='<p class="empty-state-msg">No upcoming events scheduled.</p>':t.innerHTML=n.map((e=>createCardHtml(e,"events"))).join("")}}function renderCalendar(e){const t=document.getElementById("events-calendar-container");if(!t)return;const n=currentCalDate.getMonth(),a=currentCalDate.getFullYear(),i=new Date(a,n,1).getDay(),s=new Date(a,n+1,0).getDate();let o=`\n        <div class="calendar-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">\n            <h3 style="margin: 0;"><i class="far fa-calendar-alt" style="color:var(--uh-red); margin-right:10px;"></i> ${["January","February","March","April","May","June","July","August","September","October","November","December"][n]} ${a}</h3>\n            <div class="calendar-controls" style="color: var(--uh-slate); font-size: 1.2rem;">\n                <i class="fas fa-chevron-left cal-btn" onclick="changeMonth(-1)" style="cursor: pointer; margin-right: 15px; padding: 5px;" title="Previous Month"></i>\n                <i class="fas fa-chevron-right cal-btn" onclick="changeMonth(1)" style="cursor: pointer; padding: 5px;" title="Next Month"></i>\n            </div>\n        </div>\n        <div class="calendar-grid">\n            <div class="calendar-day-name">Sun</div>\n            <div class="calendar-day-name">Mon</div>\n            <div class="calendar-day-name">Tue</div>\n            <div class="calendar-day-name">Wed</div>\n            <div class="calendar-day-name">Thu</div>\n            <div class="calendar-day-name">Fri</div>\n            <div class="calendar-day-name">Sat</div>\n    `;for(let e=0;e<i;e++)o+='<div class="calendar-day empty"></div>';for(let t=1;t<=s;t++){const i=new Date(a,n,t),s=e.filter((e=>{const a=new Date(e.date+"T00:00:00");return!(i<a)&&(a.toDateString()===i.toDateString()||("weekly"===e.recurrence?a.getDay()===i.getDay():"monthly"===e.recurrence?a.getDate()===t:"yearly"===e.recurrence&&(a.getMonth()===n&&a.getDate()===t)))})),r=s.length>0;let l="";if(r){const e=s[0],t=s.length-1;l=`\n                <div class="event-tooltip">\n                    <h5>${e.title}</h5>\n                    <span class="tooltip-meta"><i class="far fa-clock"></i> ${e.time||"All Day"}</span>\n                    <span class="tooltip-meta"><i class="fas fa-map-marker-alt"></i> ${e.location||"TBA"}</span>\n                    ${t>0?`<div style="margin-top:4px; font-weight:bold; color:var(--uh-red);">+${t} more</div>`:""}\n                    <div style="margin-top:5px; font-size:0.7rem; color:#aaa;">Click for details</div>\n                </div>`}o+=`\n            <div class="calendar-day ${r?"has-event":""}" \n                 ${r?`onclick="openDetailView(event, '${s[0].id}', 'events')"`:""}>\n                <span style="position:relative; z-index:2;">${t}</span>\n                ${l}\n            </div>`}o+="</div>",t.innerHTML=o}async function loadResearchContent(){const[e,t]=await Promise.all([fetchData("pages"),fetchData("team")]),n=e.research_aims||[],a=document.getElementById("research-aims-container"),i=t.members||[];a&&(a.innerHTML=n.map((e=>{let t="";if(e.gallery&&e.gallery.length>0){t=`<div class="aim-image-grid">${e.gallery.map((e=>`\n                        <div class="aim-image-card">\n                            <div class="aim-media-stage">${e.src.endsWith(".mp4")||e.src.endsWith(".webm")?`<video src="${e.src}" class="aim-media" autoplay loop muted playsinline></video>`:`<img src="${e.src}" alt="${e.caption||"Visual"}" class="aim-media" loading="lazy">`}</div>\n                            <div class="aim-img-caption">${e.caption||""}</div>\n                        </div>`)).join("")}</div>`}else e.image&&(t=`<img src="${e.image}" style="width:100%; border-radius:4px; margin-bottom:15px;" loading="lazy">`);let n="";if(e.faculty){n=`\n                    <div style="margin-top: 20px;">\n                        <strong style="color:var(--uh-red); display:block; margin-bottom:10px;">Associated PIs:</strong>\n                        <ul class="aim-faculty-list">${e.faculty.split(",").map((e=>{const t=e.trim(),n=i.find((e=>e.name.includes(t)));return n?`<li>\n                                    <span>${n.name}</span>\n                                    ${n.website?`<a href="${n.website}" target="_blank" title="Visit Lab Website" style="color:var(--uh-red); margin-left:5px;"><i class="fas fa-globe"></i></a>`:""}\n                                </li>`:`<li>${t}</li>`})).join("")}</ul>\n                    </div>`}return`\n                <div class="aim-card" id="aim-${e.number}">\n                    \n                    <h3>${e.title}</h3>\n                    ${t}\n                    <div class="aim-description">\n                        ${converter.makeHtml(e.description)}\n                        ${n}\n                    </div>\n                    <div class="aim-tags-block">\n                        ${(e.tags||[]).map((e=>`<span class="tag">${e}</span>`)).join(" ")}\n                    </div>\n                </div>\n            `})).join(""))}async function loadNewsContent(){const e=(await fetchData("news")).articles||[];window.newsStore=e;const t=document.getElementById("news-grid");t&&(t.innerHTML=e.sort(((e,t)=>new Date(t.date)-new Date(e.date))).map((e=>createCardHtml(e,"news"))).join(""))}async function loadOutreachContent(){const e=(await fetchData("outreach")).programs||[];window.outreachStore=e;const t=document.getElementById("outreach-grid");t&&(t.innerHTML=e.sort(((e,t)=>new Date(t.date)-new Date(e.date))).map((e=>createCardHtml(e,"outreach"))).join(""))}function createCardHtml(e,t){let n={icon:"calendar-alt",btnText:"Read Story",phLabel:"News",phIcon:"newspaper"};"outreach"===t&&(n={icon:"heart",btnText:"View Report",phLabel:"Outreach",phIcon:"hand-holding-heart"}),"events"===t&&(n={icon:"clock",btnText:"Event Details",phLabel:"Event",phIcon:"calendar-check"});let a=new Date(e.date).toLocaleDateString();"events"===t&&e.time&&(a+=` | ${e.time}`),"outreach"===t&&e.tags&&e.tags.length&&(a=e.tags[0]);const i=e.category||(e.tags&&e.tags.length>0?e.tags[0]:"Update"),s=e.image?`<img src="${e.image}" alt="${e.title}" loading="lazy">`:`<div class="placeholder-img">\n             <i class="far fa-${n.phIcon} placeholder-icon"></i>\n             <span class="placeholder-label">${n.phLabel}</span>\n           </div>`,o=e.link&&!["news","outreach","events"].includes(t);return`\n        <div class="news-card">\n            <div class="news-img-wrapper">${s}</div>\n            <div class="news-content">\n                <div class="news-meta">\n                    <i class="far fa-${n.icon}"></i> ${a}\n                    <span style="margin:0 5px; opacity:0.5;">|</span> ${i}\n                </div>\n                <h3 class="news-title">${e.title}</h3>\n                <p class="news-excerpt">${e.preview}</p>\n                <div style="margin-top: auto;">\n                    <a href="#${t}/${e.id}" class="news-link">\n                        ${n.btnText} <i class="fas fa-arrow-right"></i>\n                    </a>\n                    \n                    ${o?`\n                        <div style="margin-top: 12px; border-top: 1px solid #eee; padding-top: 10px;">\n                            <a href="${e.link}" target="_blank" class="view-link" style="margin-left: 0;">\n                                GO TO WEBSITE <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i>\n                            </a>\n                        </div>`:""}\n                </div>\n            </div>\n        </div>\n    `}async function loadAdvisoryContent(){const e=await fetchData("globals");let t=e.advisory_board||[];t.sort(((e,t)=>{const n=e.name.trim().split(" ").pop(),a=t.name.trim().split(" ").pop();return n.localeCompare(a)}));const n=document.getElementById("advisory-board-grid");if(n){let a=t.map((e=>{const t=[];e.company_icon&&t.push(e.company_icon),e.company_icon_2&&t.push(e.company_icon_2);let n="";if(t.length>0){n=`<div class="affiliation-logos-wrapper">${t.map((e=>`<img src="${e}" class="affiliation-logo" alt="Affiliation Logo" loading="lazy">`)).join("")}</div>`}return`\n            <div class="profile-card text-center">\n                 <div class="profile-img-container">\n                    <img src="${e.image}" class="profile-img" loading="lazy" onerror="this.onerror=null;this.src='${PLACEHOLDER_IMG_HUMAN}'">\n                 </div>\n                 <div class="profile-info">\n                      <h4 class="profile-name">${e.name}</h4>\n                      <p class="profile-role">${e.role}</p>\n                      ${n}\n                 </div>\n            </div>\n        `})).join("");e.advisory_group_image&&(a+=`<div class="advisory-group-wrapper">\n                <h3 class="category-title" style="border-left:none; padding-left:0; text-align:center;">Center's Advisory Board and Principal Investigators</h3>\n                <img src="${e.advisory_group_image}" style="width:100%; border-radius:4px; box-shadow: var(--shadow-card);" alt="Advisory Board Group Photo">\n            </div>`),n.innerHTML=a}}async function loadOutputsContent(){const e=await fetchData("publications"),t=document.getElementById("publications-heading");t&&(t.textContent="Publications"),renderAccordion(e.papers||[],"publications-list","journal",!0);renderAccordion((await fetchData("patents")).patents||[],"patents-list","inventors",!0);renderAccordion((await fetchData("presentations")).talks||[],"presentations-list","conference",!0);renderAccordion((await fetchData("awards")).awards||[],"awards-list","recipient",!0)}function renderAccordion(e,t,n,a=!1){const i=document.getElementById(t);if(!i)return;const s=document.getElementById(`search-container-${t}`);if(s&&s.remove(),a){const a=`\n            <div id="search-container-${t}" class="search-container">\n                <input type="text" id="search-${t}" class="search-input" placeholder="Search by title, name or keyword...">\n                <i class="fas fa-search search-icon"></i>\n            </div>\n        `,s=document.createElement("div");s.innerHTML=a,i.parentNode.insertBefore(s,i),document.getElementById(`search-${t}`).addEventListener("input",(a=>{const s=a.target.value.toLowerCase();renderAccordionList(e.filter((e=>e.title&&e.title.toLowerCase().includes(s)||e.tags&&e.tags.some((e=>e.toLowerCase().includes(s)))||e.authors&&e.authors.toLowerCase().includes(s)||e.inventors&&e.inventors.toLowerCase().includes(s)||e.presenter&&e.presenter.toLowerCase().includes(s)||e.recipient&&e.recipient.toLowerCase().includes(s)||e[n]&&e[n].toLowerCase().includes(s)||e.year&&e.year.toString().includes(s)||e.location&&e.location.toLowerCase().includes(s))),i,n,t)}))}renderAccordionList(e,i,n,t)}function renderAccordionList(e,t,n,a){const i=e.reduce(((e,t)=>{let n=t.year;return!n&&t.date&&(n=new Date(t.date).getFullYear()),n||(n="Other"),e[n]||(e[n]=[]),e[n].push(t),e}),{}),s=Object.keys(i).sort(((e,t)=>t-e));let o="";0!==s.length?(s.forEach(((e,t)=>{let s=i[e];s.sort(((e,t)=>{const n=!0===e.featured,a=!0===t.featured;return n&&!a?-1:!n&&a?1:0}));const r=0===t?"active":"",l=0===t?"show":"",c=0===t?"fa-chevron-up":"fa-chevron-down",d=s.slice(0,5),p=s.slice(5),m=p.length>0,g=e=>{let t="";const i="awards-list"===a;i?e.recipient&&(t+=`<p class="pub-authors" style="color:var(--uh-red); font-weight:700;">${e.recipient}</p>`):(e.authors&&(t+=`<p class="pub-authors">Authors: ${e.authors}</p>`),e.inventors&&(t+=`<p class="pub-authors">Inventors: ${e.inventors}</p>`),e.presenter&&(t+=`<p class="pub-authors">${e.presenter}</p>`));let s="";e.link&&(s=`<a href="${e.link}" target="_blank" class="view-link">VIEW</a>`);let o=[];!i&&"inventors"!==n&&e[n]&&o.push(e[n]),e.status&&o.push(e.status);const r=o.join(" | ");return`\n            <div class="pub-item ${e.featured?"featured-pub":""}">\n                <div class="pub-details">\n                    <h4>${e.title} ${e.featured?"<span></span>":""}</h4>\n                    <p class="pub-journal">\n                        ${r}\n                        ${s}\n                    </p>\n                    ${t}\n                </div>\n            </div>\n            `};o+=`\n            <div class="accordion-year-group">\n                <div class="accordion-header ${r}" onclick="toggleAccordion(this)">\n                    <span>${e}</span>\n                    <i class="fas ${c}"></i>\n                </div>\n                <div class="accordion-content ${l}">\n                    <div class="visible-list">\n                        ${d.map(g).join("")}\n                    </div>\n                    ${m?`\n                        <div class="hidden-list" style="display:none;">\n                            ${p.map(g).join("")}\n                        </div>\n                        <button class="toggle-btn" onclick="toggleMore(this)" data-count="${s.length}">View All (${s.length}) <i class="fas fa-plus"></i></button>\n                    `:""}\n                </div>\n            </div>\n        `})),t.innerHTML=o):t.innerHTML='<p class="empty-state-msg">No results found.</p>'}async function loadHomePageContent(){const e=(await fetchData("pages")).home||{},t=document.getElementById("hero-content");t&&e.hero_title&&(t.innerHTML=`\n            <div class="hero-text-overlay">\n                <h2>${e.hero_title}</h2>\n                <p>${e.hero_text}</p>\n                <button class="btn" style="background: white; color: var(--uh-red); border-color: white;" onclick="switchPage('research')">Explore Our Research</button>\n            </div>`);const n=document.getElementById("hero-slider-container"),a=document.getElementById("slider-indicators");n&&a&&e.slides&&(n.innerHTML=e.slides.map(((e,t)=>`\n            <div class="hero-slide ${0===t?"active":""}" style="background-image: url('${e.image}');">\n                <img src="${e.image}" alt="${e.alt}" loading="${0===t?"eager":"lazy"}">\n            </div>`)).join(""),a.innerHTML=e.slides.map(((e,t)=>`\n            <div class="indicator ${0===t?"active":""}" onclick="goToSlide(${t})"></div>`)).join(""),"function"==typeof initializeSlider&&initializeSlider());const i=document.getElementById("director-message-section");i&&e.director&&(i.innerHTML=`\n            <div><img src="${e.director.photo}" alt="${e.director.name}" class="director-img" loading="lazy"></div>\n            <div>\n                <h3 class="text-uh-red">Director's Message</h3>\n                <p class="mission-text" style="margin: 20px 0;">${e.director.message}</p>\n                <p><strong>${e.director.name}</strong><br>${e.director.role}</p>\n            </div>`);const s=(await fetchData("events")).events_list||[];window.eventsStore=s;const o=document.getElementById("event-preview-grid");if(o){const e=new Date;e.setHours(0,0,0,0);const t=s.filter((t=>new Date(t.date)>=e)).slice(0,4);0===t.length?o.innerHTML='<p class="empty-state-msg">No upcoming events scheduled at this time.</p>':o.innerHTML=t.map((e=>`\n                <div class="aim-card">\n                    <div style="background: var(--uh-red); color: white; display: inline-block; padding: 5px 15px; font-weight: bold; margin-bottom: 10px;">\n                        ${new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase()}\n                    </div>\n                    <h4>${e.title}</h4>\n                    <p>${e.preview}</p>\n                    <div style="font-size:0.85rem; color:var(--uh-slate); margin-bottom:10px;">\n                        <i class="far fa-clock"></i> ${e.time||"TBA"}\n                    </div>\n                    <a href="#" onclick="openDetailView(event, '${e.id}', 'events')" class="text-uh-red" style="font-weight:700; font-size:0.9rem;">Event Details &rarr;</a>\n                </div>`)).join("")}}async function loadImpactStats(){const e=(await fetchData("globals")).impact_stats||[],t=document.getElementById("impact-stats-grid");t&&(t.innerHTML=e.map((e=>`\n        <div><h2 style="font-size: 3rem; color: ${e.color||"#F4D03F"};">${e.value}</h2><p>${e.label}</p></div>\n    `)).join(""))}async function loadContactContent(){const e=(await fetchData("globals")).contact||{},t=document.getElementById("contact-info-grid"),n=document.getElementById("about-contact-preview");t&&(t.innerHTML=`\n            <div>\n                <h4>Mailing Address</h4>\n                <p>${e.address_line1}<br>${e.address_line2}<br>${e.address_line3}<br>${e.address_line4}</p>\n                <h4 style="margin-top: 20px;">Email</h4>\n                <p>${e.email}</p>\n                <h4 style="margin-top: 20px;">Phone</h4>\n                <p>${e.phone}</p>\n                ${e.linkedin?`<h4 style="margin-top:20px;">Social</h4><a href="${e.linkedin}" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a>`:""}\n            </div>\n            <div class="contact-map-container">\n                <iframe src="${e.map_embed_url}" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>\n            </div>\n        `),n&&(n.innerHTML=`<p style="font-size: 0.9rem;">${e.address_line1}<br>${e.address_line2}<br>${e.address_line3}<br>${e.address_line4}</p>`)}async function loadAboutContent(){const e=(await fetchData("pages")).about||{},t=document.getElementById("about-main-content");if(t&&e.overview){const n=e.overview,a=n.body?n.body.split("\n\n").map((e=>`<p style="margin-bottom: 1.5rem;">${e}</p>`)).join(""):"";t.innerHTML=`\n            <h3 style="margin-top:0;">${n.title}</h3>\n            <p style="font-size: 1.2rem; font-weight: 500; color: var(--uh-red); margin-bottom: 1.5rem; line-height: 1.4;">\n                ${n.lead}\n            </p>\n            <div style="color: var(--text-main); font-size: 1rem; line-height: 1.7;">\n                ${a}\n            </div>\n            <img src="${n.image}" alt="${n.image_alt}" \n                 style="width: 100%; border-radius: 4px; margin-top: 30px; box-shadow: var(--shadow-card);" \n                 loading="lazy">\n        `}}function initRouter(){function e(){const e=decodeURIComponent(window.location.hash.slice(1));if(!e)return void("function"==typeof switchPage&&switchPage("home"));const[t,n]=e.split("/");t&&!n&&["home","about","team","research","outputs","advisory","news","outreach","events"].includes(t)?"function"==typeof switchPage&&switchPage(t):t&&n&&setTimeout((()=>{"function"==typeof window.openDetailView&&window.openDetailView(null,n,t)}),50)}window.removeEventListener("hashchange",e),window.addEventListener("hashchange",e),"loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e()}window.changeMonth=function(e){currentCalDate.setMonth(currentCalDate.getMonth()+e),renderCalendar(window.eventsStore||[])},window.openDetailView=async function(e,t,n){e&&e.preventDefault();const a=`${n}-detail-content`,i=document.getElementById(a);if(!i)return;if("function"==typeof switchPage&&switchPage(`${n}-detail`),window.scrollTo({top:0,behavior:"auto"}),i.innerHTML='\n        <div style="text-align:center; padding: 4rem 0; color: var(--uh-slate);">\n            <i class="fas fa-spinner fa-spin fa-2x"></i>\n            <p style="margin-top:1rem;">Loading content...</p>\n        </div>',!window[`${n}Store`]||0===window[`${n}Store`].length)try{const e=await fetchData(n);window[`${n}Store`]=e.events_list||e.articles||e.programs||[]}catch(e){return void(i.innerHTML='<p class="error-msg">Error loading content.</p>')}const s=window[`${n}Store`].find((e=>e.id==t));if(!s)return console.warn(`Item not found: ${t}`),void(i.innerHTML=`\n            <div style="text-align:center; padding: 4rem;">\n                <h3>Content Not Found</h3>\n                <button class="btn" onclick="switchPage('${n}')" style="margin-top:20px;">Return to ${n}</button>\n            </div>`);let o="";const r=e=>void 0!==converter?converter.makeHtml(e||""):e;if("object"==typeof s.body&&null!==s.body){const e=s.body;e.lead_text&&(o+=`<p class="article-lead">${e.lead_text}</p>`),Array.isArray(e.content_blocks)&&(o+=e.content_blocks.map((e=>{if("image_row"===e.type){return`<div class="article-image-row">${e.items.map((e=>`\n                        <figure class="image-row-item">\n                            <img src="${e.src}" alt="${e.caption||""}" loading="lazy">\n                            ${e.caption?`<figcaption>${e.caption}</figcaption>`:""}\n                        </figure>\n                    `)).join("")}</div>`}if("image"===e.type)return`<figure class="article-image-wrapper">\n                        <img src="${e.src}" alt="${e.caption||""}" loading="lazy">\n                        ${e.caption?`<figcaption>${e.caption}</figcaption>`:""}\n                    </figure>`;if("people_grid"===e.type){const t=e.items.map((e=>{let t="";if(e.video){const n=e.image?`poster="${e.image}"`:"";t=`<video src="${e.video}" class="person-media" controls preload="metadata" playsinline ${n}></video>`}else t=e.image?`<img src="${e.image}" alt="${e.name}" class="person-media" loading="lazy">`:'<div class="person-placeholder"><i class="fas fa-user"></i></div>';return`<div class="person-mini-card"><div class="person-img-wrapper">${t}</div><div class="person-info"><h4 class="person-name">${e.name}</h4><div class="person-role">${e.role}</div>${e.caption?`<p class="person-caption">${e.caption}</p>`:""}</div></div>`})).join(""),n=e.columns?`style="grid-template-columns: repeat(${e.columns}, 1fr);"`:"";return`<div class="people-grid-section">${e.title?`<h3 class="text-uh-red" style="margin-bottom:0.5rem; border:none; padding-left:0;">${e.title}</h3>`:""}${e.description?`<p style="margin-bottom:1.5rem; font-style:italic; color:#666;">${e.description}</p>`:""}<div class="people-grid-container" ${n}>${t}</div></div>`}if("video"===e.type){const t=e.src||"";let n="";const a=t.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w-]{11})/),i=t.match(/vimeo\.com\/(\d+)/),s=t.match(/\.(mp4|webm|ogg|mov)$/i);return n=a?`<div class="video-embed-container"><iframe src="https://www.youtube.com/embed/${a[1]}" frameborder="0" allowfullscreen></iframe></div>`:i?`<div class="video-embed-container"><iframe src="https://player.vimeo.com/video/${i[1]}" frameborder="0" allowfullscreen></iframe></div>`:s?`<video src="${t}" controls preload="metadata" playsinline style="width:100%; border-radius:8px; box-shadow:var(--shadow-card);">Your browser does not support the video tag.</video>`:`<div style="text-align:center; padding: 2rem; background:#f8f9fa; border-radius:8px; border:1px solid #ddd;">\n                            <p style="margin-bottom:10px; font-weight:bold; color:#555;">External Video Content</p>\n                            <a href="${t}" target="_blank" class="btn" style="background-color: var(--uh-red); color: white;">\n                                <i class="fas fa-external-link-alt"></i> Watch Video\n                            </a>\n                        </div>`,`<figure class="article-video-wrapper" style="margin: 2.5rem 0;">\n                        ${n}\n                        ${e.caption?`<figcaption style="text-align:center; font-style:italic; color:#666; margin-top:0.5rem; font-size:0.9rem;"><i class="fas fa-play-circle"></i> ${e.caption}</figcaption>`:""}\n                    </figure>`}if("quote"===e.type)return`<div class="article-quote"><p>"${e.content}"</p>${e.author?`<span>â€” ${e.author}</span>`:""}</div>`;if("highlight_box"===e.type||"list"===e.type){return`<div class="highlight-box" style="${"list"===e.type?"border-left-color: var(--uh-slate); background: #fff; border: 1px solid #eee; border-left: 4px solid var(--uh-slate);":""}">${e.title?`<h3>${e.title}</h3>`:""}<ul>${e.items.map((e=>`<li>${e}</li>`)).join("")}</ul></div>`}return"header"===e.type?`<h3 class="text-uh-red" style="margin-top: 2.5rem; border-left: none; padding-left: 0;">${e.content}</h3>`:"text"===e.type?`<div class="article-text">${r(e.content)}</div>`:""})).join(""))}else o=r(s.body||"");const l=s.image?`<img src="${s.image}" alt="${s.title}">`:`<div class="placeholder-img" style="height:300px"><span class="placeholder-label">${n.toUpperCase()}</span></div>`,c=s.body&&s.body.image_caption?`<div class="article-category-badge" style="bottom:0; left:0; width:100%; padding:10px; background:rgba(0,0,0,0.7); font-size:0.8rem; text-transform:none;">${s.body.image_caption}</div>`:`<span class="article-category-badge">${s.category||n}</span>`,d=s.body&&s.body.full_title?s.body.full_title:s.title,p=s.date_display||new Date(s.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});i.innerHTML=`\n        <article class="article-container">\n            <div class="article-hero">${l}${c}</div>\n            <header class="article-header">\n                <div class="article-meta-row"><span><i class="far fa-calendar-alt"></i> ${p}</span></div>\n                <h1 class="article-title text-uh-red">${d}</h1>\n                ${"events"===n?`<div style="background: var(--uh-light-gray); padding: 15px; border-radius: 4px; margin-top: 20px; border-left: 4px solid var(--uh-red);"><div><strong><i class="far fa-clock text-uh-red"></i> Time:</strong> ${s.time||"TBA"}</div><div><strong><i class="fas fa-map-marker-alt text-uh-red"></i> Location:</strong> ${s.location||"TBA"}</div></div>`:""}\n                ${s.link?`<div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(0,0,0,0.1);"><a href="${s.link}" target="_blank" class="btn" style="background-color: var(--uh-red); color: white;">GO TO WEBSITE <i class="fas fa-external-link-alt"></i></a></div>`:""}\n            </header>\n            <div class="article-body">${o}</div>\n            <div class="article-footer">\n                 <a href="#${n}" onclick="switchPage('${n}')" class="btn">Back to ${n.charAt(0).toUpperCase()+n.slice(1)}</a>\n            </div>\n        </article>\n    `,setTimeout((()=>{history.replaceState(null,null,`#${n}/${t}`)}),50)},window.toggleAccordion=function(e){e.classList.toggle("active");const t=e.nextElementSibling,n=e.querySelector("i");t.classList.contains("show")?(t.classList.remove("show"),n.className="fas fa-chevron-down"):(t.classList.add("show"),n.className="fas fa-chevron-up")},window.toggleMore=function(e){const t=e.previousElementSibling;if(t)if("none"===t.style.display)t.style.display="block",e.innerHTML='Show Less <i class="fas fa-minus"></i>';else{t.style.display="none";const n=e.getAttribute("data-count")||"";e.innerHTML=`View All (${n}) <i class="fas fa-plus"></i>`}},initRouter(),window.loadContent=function(e){"function"==typeof loadImpactStats&&loadImpactStats(),"function"==typeof loadContactContent&&loadContactContent(),"home"===e?loadHomePageContent():"about"===e?loadAboutContent():"team"===e?loadTeamContent():"outputs"===e?loadOutputsContent():"research"===e?loadResearchContent():"advisory"===e?loadAdvisoryContent():"news"===e?loadNewsContent():"outreach"===e?loadOutreachContent():"events"===e&&loadEventsContent()};